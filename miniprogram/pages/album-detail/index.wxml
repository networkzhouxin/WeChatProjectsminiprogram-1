<!--pages/album-detail/index.wxml-->
<view class="container">
  <!-- 加载中提示 -->
  <view class="loading-container" wx:if="{{isLoading}}">
    <view class="loading-text">加载中...</view>
  </view>
  
  <!-- 空相册提示 - 使用自定义设计替代TDesign图标 -->
  <view class="empty-container" wx:if="{{isEmpty && !isLoading}}">
    <view class="custom-empty-view">
      <view class="custom-icon-container">
        <view class="custom-icon-image"></view>
      </view>
      <view class="custom-empty-text">相册中还没有照片</view>
      <button class="custom-add-btn" bindtap="addNewPhoto">添加照片</button>
    </view>
  </view>
  
  <!-- 照片列表 - 按日期分组显示 -->
  <view class="photos-by-date" wx:if="{{!isEmpty && !isLoading}}">
    <block wx:for="{{groupedPhotoList}}" wx:key="title" wx:for-item="group">
      <view class="photo-date-group">
        <view class="date-title">{{group.title}}</view>
        <view class="photo-grid">
          <block wx:for="{{group.items}}" wx:key="id || _id">
            <view class="photo-item" data-index="{{index}}" data-date-group="{{group.title}}" bindtap="previewPhoto" bindlongpress="onPhotoLongPress">
              <image 
                class="photo-image" 
                src="{{item.tempFileURL || item.fileID}}" 
                mode="aspectFill" 
                lazy-load="{{true}}"
                data-index="{{index}}"
                data-date-group="{{group.title}}"
                binderror="onImageError"
              ></image>
            </view>
          </block>
        </view>
      </view>
    </block>
  </view>
  
  <!-- 浮动加号按钮 -->
  <view class="floating-button" bindtap="addNewPhoto">
    <text class="float-icon">+</text>
  </view>
</view> 
<!--index.wxml-->
<view class="container">
  <!-- 相册列表 -->
  <view class="album-list">
    <!-- 新建相册按钮 -->
    <view class="album-item add-album" bindtap="addNewAlbum">
      <view class="album-cover">
        <text>+</text>
        <text class="add-text">新建相册</text>
      </view>
    </view>

    <!-- 相册列表项 -->
    <view class="album-item" 
      wx:for="{{albumList}}" 
      wx:key="id"
      bindtap="onAlbumTap" 
      bindlongpress="onAlbumLongPress"
      data-album="{{item}}">
      <!-- 使用TDesign的空相册组件 -->
      <view class="album-cover">
        <t-empty-album 
          wx:if="{{item.cover === '/images/default-album.png' || !item.cover}}"
          title="{{item.title}}"
          count="{{item.count}}"
        ></t-empty-album>
        <!-- 显示实际相册封面 -->
        <image wx:else src="{{item.cover}}" mode="aspectFill"></image>
      </view>
      <view class="album-info">
        <text class="album-title">{{item.title}}</text>
        <text class="album-count">{{item.count}}张</text>
      </view>
    </view>
  </view>

  <!-- 空状态 - 使用自定义设计替代TDesign图标 -->
  <view class="empty-state" wx:if="{{albumList.length === 0 && !isLoading}}">
    <view class="custom-empty-view">
      <view class="custom-icon-container">
        <view class="custom-icon-folder"></view>
      </view>
      <view class="custom-empty-text">暂无相册</view>
      <button class="add-album-btn" bindtap="addNewAlbum">新建相册</button>
    </view>
  </view>

  <!-- 新建/重命名相册弹窗 -->
  <view class="modal" wx:if="{{showAddAlbumModal}}">
    <view class="modal-mask" bindtap="closeAddAlbumModal"></view>
    <view class="modal-content">
      <view class="modal-header">
        <text>{{isRenaming ? '重命名相册' : '新建相册'}}</text>
      </view>
      <view class="modal-body">
        <input class="album-name-input" 
          placeholder="请输入相册名称" 
          value="{{newAlbumName}}"
          bindinput="onNewAlbumNameInput"
          focus="{{true}}"
        />
      </view>
      <view class="modal-footer">
        <button class="btn-cancel" bindtap="closeAddAlbumModal">取消</button>
        <button class="btn-confirm" bindtap="confirmAddAlbum">确定</button>
      </view>
    </view>
  </view>
</view>